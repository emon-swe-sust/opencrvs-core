(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{126:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return p}));var r=n(3),o=n(7),a=(n(0),n(136)),c=n(137),i={id:"contentManagement",title:"Content Management"},l={unversionedId:"technology/contentManagement",id:"technology/contentManagement",isDocsHomePage:!1,title:"Content Management",description:"You can configure an external content management system such as Contentful.",source:"@site/docs/technology/Content_Management.mdx",slug:"/technology/contentManagement",permalink:"/opencrvs-core/docs/technology/contentManagement",version:"current",sidebar:"docs",previous:{title:"Deployment",permalink:"/opencrvs-core/docs/technology/deployment"}},s=[{value:"Configuration",id:"configuration",children:[]}],u={toc:s};function p(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"You can configure an external content management system such as ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://www.contentful.com/"}),"Contentful"),"."),Object(a.b)("p",null,"We have provided some handy import scripts and configuration values to help you import your languages, preview,\npublish and easily manage all application text, including form fields, labels, validation error messages and SMS messages in multi-language."),Object(a.b)("p",null,"Over 1000 different content keys can be content managed."),Object(a.b)("img",{alt:"Reason_for_correction",src:Object(c.a)("assets/technology/content-management.png")}),Object(a.b)("p",null,"We currently do not recommend one CMS over another and for now the, process of updating your CMS is outside current OpenCRVS scope.\nSo if you plan on using a CMS, you will need to keep an eye on OpenCRVS releases and perform the necessary migrations when new content keys are added for new features."),Object(a.b)("p",null,"An automated commit script in core highlights new keys that need to be imported into your country resources package."),Object(a.b)("h2",{id:"configuration"},"Configuration"),Object(a.b)("p",null,"Contentful is a paid-for service but 1 space and 2 locales are free. At the time of writing we couldnt find a better free option for multi-language content management."),Object(a.b)("p",null,"When a new commit is pushed to core, you can pass the environment variables ",Object(a.b)("strong",{parentName:"p"},"RESOURCES_PATH")," and ",Object(a.b)("strong",{parentName:"p"},"COUNTRY_CODE")," and the commit will automatically export content keys in ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/opencrvs/opencrvs-zambia/blob/master/src/zmb/features/languages/generated"}),"this")," folder."),Object(a.b)("p",null,"To perform an initial import to Contentful:"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"First create a space in Contentful and add up to 2 locales for the free plan. Copy your ",Object(a.b)("strong",{parentName:"li"},"space-id")," from Contentful settings."),Object(a.b)("li",{parentName:"ol"},"Download and install the ",Object(a.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/contentful/contentful-cli"}),"Contentful cli")),Object(a.b)("li",{parentName:"ol"},"Run the following command to export your space as you will need ids for your locales: ",Object(a.b)("inlineCode",{parentName:"li"},"contentful space export --space-id=<your-space-id>")),Object(a.b)("li",{parentName:"ol"},"Open the exported file and copy the required ids to this ",Object(a.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/opencrvs/opencrvs-zambia/blob/master/src/zmb/features/languages/scripts/constants.ts"}),"file")),Object(a.b)("li",{parentName:"ol"},"You can run the following command to generate a ",Object(a.b)("strong",{parentName:"li"},"contentful-import.json")," file: ",Object(a.b)("inlineCode",{parentName:"li"},"yarn contentful:prepare:import")),Object(a.b)("li",{parentName:"ol"},"Run the Contentful import script: ",Object(a.b)("inlineCode",{parentName:"li"},"contentful space import --content-file src/zmb/features/languages/generated/contentful-import.json --space-id=<your-space-id>")),Object(a.b)("li",{parentName:"ol"},"Get your API key from contentful settings and add it to docker secrets, or paste ",Object(a.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/opencrvs/opencrvs-zambia/blob/master/src/zmb/constants.ts"}),"here")," for use in development. DO NOT SUBMIT API KEYS TO A PUBLIC REPO!")))}p.isMDXComponent=!0},136:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n(0),o=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=o.a.createContext({}),u=function(e){var t=o.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=u(e.components);return o.a.createElement(s.Provider,{value:t},e.children)},f={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},b=o.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=u(n),b=r,m=p["".concat(c,".").concat(b)]||p[b]||f[b]||a;return n?o.a.createElement(m,i(i({ref:t},s),{},{components:n})):o.a.createElement(m,i({ref:t},s))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,c=new Array(a);c[0]=b;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,c[1]=i;for(var s=2;s<a;s++)c[s]=n[s];return o.a.createElement.apply(null,c)}return o.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},137:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var r=n(22),o=n(138);function a(){var e=Object(r.default)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,n=void 0===t?"/":t,a=e.url;return{withBaseUrl:function(e,t){return function(e,t,n,r){var a=void 0===r?{}:r,c=a.forcePrependBaseUrl,i=void 0!==c&&c,l=a.absolute,s=void 0!==l&&l;if(!n)return n;if(n.startsWith("#"))return n;if(Object(o.b)(n))return n;if(i)return t+n;var u=n.startsWith(t)?n:t+n.replace(/^\//,"");return s?e+u:u}(a,n,e,t)}}}function c(e,t){return void 0===t&&(t={}),(0,a().withBaseUrl)(e,t)}},138:function(e,t,n){"use strict";function r(e){return!0===/^(\w*:|\/\/)/.test(e)}function o(e){return void 0!==e&&!r(e)}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))}}]);