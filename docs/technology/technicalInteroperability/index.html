<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/opencrvs-core/blog/rss.xml" title="OpenCRVS is a digital public good to help achieve universal civil registration and evidence-based decision making in all country contexts Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/opencrvs-core/blog/atom.xml" title="OpenCRVS is a digital public good to help achieve universal civil registration and evidence-based decision making in all country contexts Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-158266937-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<script src="https://opencrvs.github.io/opencrvs-core/js/gitter.js"></script><title data-react-helmet="true">Technical interoperability | OpenCRVS is a digital public good to help achieve universal civil registration and evidence-based decision making in all country contexts</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Technical interoperability | OpenCRVS is a digital public good to help achieve universal civil registration and evidence-based decision making in all country contexts"><meta data-react-helmet="true" name="description" content="By using FHIR as a standard for our NoSQL datastore Hearth and interoperability layer OpenHIM, OpenCRVS seamlessly connects civil registration to health services and other systems. We can receive birth and death notifications from the hospital setting and expose registration events to any other technical system, such as National ID, via our FHIR standard API gateways in OpenHIM."><meta data-react-helmet="true" property="og:description" content="By using FHIR as a standard for our NoSQL datastore Hearth and interoperability layer OpenHIM, OpenCRVS seamlessly connects civil registration to health services and other systems. We can receive birth and death notifications from the hospital setting and expose registration events to any other technical system, such as National ID, via our FHIR standard API gateways in OpenHIM."><meta data-react-helmet="true" property="og:url" content="https://opencrvs.github.io//opencrvs-core/docs/technology/technicalInteroperability"><link data-react-helmet="true" rel="shortcut icon" href="/opencrvs-core/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://opencrvs.github.io//opencrvs-core/docs/technology/technicalInteroperability"><link rel="stylesheet" href="/opencrvs-core/styles.3dc96041.css">
<link rel="preload" href="/opencrvs-core/styles.aa7a5620.js" as="script">
<link rel="preload" href="/opencrvs-core/runtime~main.7b9d33d2.js" as="script">
<link rel="preload" href="/opencrvs-core/main.15f78e6e.js" as="script">
<link rel="preload" href="/opencrvs-core/1.4a595656.js" as="script">
<link rel="preload" href="/opencrvs-core/2.4d28047a.js" as="script">
<link rel="preload" href="/opencrvs-core/1be78505.9de9b068.js" as="script">
<link rel="preload" href="/opencrvs-core/a6aa9e1f.7b77f294.js" as="script">
<link rel="preload" href="/opencrvs-core/c4f5d8e4.3ca96593.js" as="script">
<link rel="preload" href="/opencrvs-core/ccc49370.05b271aa.js" as="script">
<link rel="preload" href="/opencrvs-core/68.94c17dca.js" as="script">
<link rel="preload" href="/opencrvs-core/67.8bca164e.js" as="script">
<link rel="preload" href="/opencrvs-core/935f2afb.6e01492a.js" as="script">
<link rel="preload" href="/opencrvs-core/17896441.d87f9ed0.js" as="script">
<link rel="preload" href="/opencrvs-core/036cd733.d394ca11.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/opencrvs-core/"><img src="/opencrvs-core/img/logo.svg" alt="OpenCRVS Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/opencrvs-core/img/logo.svg" alt="OpenCRVS Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title"></strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/opencrvs-core/docs/system_overview/introduction">Docs</a><a class="navbar__item navbar__link" href="/opencrvs-core/docs/community/introduction">Community</a><a href="https://github.com/opencrvs/opencrvs-core" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Code</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/opencrvs-core/"><img src="/opencrvs-core/img/logo.svg" alt="OpenCRVS Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/opencrvs-core/img/logo.svg" alt="OpenCRVS Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/opencrvs-core/docs/system_overview/introduction">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/opencrvs-core/docs/community/introduction">Community</a></li><li class="menu__list-item"><a href="https://github.com/opencrvs/opencrvs-core" target="_blank" rel="noopener noreferrer" class="menu__link">Code</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">System overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/designPrinciples">Design principles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/functionalArchitecture">Functional architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/keyFeatures">Key features</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/interoperability">Interoperability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/siteMap">Sitemap</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">User types</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/user_types/overviewUserTypes">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/user_types/fieldAgents">Field agents</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/user_types/registrationAgent">Registration agent</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/user_types/registrationAgentDelAuth">Registration agent with delegated authority</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/user_types/registrar">Registrar</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/user_types/registrationManager">Registration manager</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_overview/user_types/sysAdmin">System administrator</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Core functions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/core_functions/notifyAVitalEvent">Notify a vital event</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/core_functions/declareAVitalEvent">Declare a vital event</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/core_functions/validateRegisterVitalEvent">Validate &amp; register a vital event</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/core_functions/issueACertificate">Issue a certificate</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/core_functions/vitalStatisticsExport">Vital statistics export</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/core_functions/correctRecord">Correct record</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/core_functions/recordVerification">Record verification</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Support functions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/support_functions/login">Login</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/support_functions/performanceManagement">Performance management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/support_functions/audit">Audit</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/support_functions/learning">Learning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/support_functions/legacyDataImport">Legacy data import</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/support_functions/userSupport">User support</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">System admin functions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_admin/userTeam">User &amp; team management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_admin/contentManagement">Content management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_admin/commsManagement">Communications management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/opencrvs-core/docs/system_admin/configManagement">Configuration management</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Technology</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/opencrvs-core/docs/technology/technologyIntroduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/opencrvs-core/docs/technology/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/opencrvs-core/docs/technology/technicalConfiguration">Technical configuration</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/opencrvs-core/docs/technology/technicalInteroperability">Technical interoperability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/opencrvs-core/docs/technology/webhooks">Webhook integration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/opencrvs-core/docs/technology/mediators">Mediators and FHIR</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/opencrvs-core/docs/technology/deployment">Deployment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/opencrvs-core/docs/technology/contentManagement">Content Management</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Technical interoperability</h1></header><div class="markdown"><p>By using <a href="https://hl7.org/FHIR/" target="_blank" rel="noopener noreferrer">FHIR</a> as a standard for our NoSQL datastore <a href="https://github.com/jembi/hearth" target="_blank" rel="noopener noreferrer">Hearth</a> and interoperability layer <a href="http://openhim.org/" target="_blank" rel="noopener noreferrer">OpenHIM</a>, OpenCRVS seamlessly connects civil registration to health services and other systems. We can receive birth and death notifications from the hospital setting and expose registration events to any other technical system, such as National ID, via our FHIR standard API gateways in OpenHIM.</p><p>To integrate with OpenCRVS, the recommended approach is to host a microservice on your platform that can interact with OpenHIM. This microservice is referred to as a <a href="/opencrvs-core/docs/technology/mediators">mediator</a>.</p><p>A mediator, with the right scope and permissions can interact with existing endpoints in the OpenCRVS stack. But the most logical integration point is to subscribe to OpenCRVS <a href="/opencrvs-core/docs/technology/webhooks">Webhooks</a>.</p><p>To set up a mediator with the right permissions there is no GUI, your system administrator is required to:</p><ol><li>SSH into the OpenCRVS manager node and register a new system client. Described below.</li><li>Securely host the system <code>client_id</code>, <code>client_secret</code> and <code>sha_secret</code>, returned in the registration process, as environment variables or secrets that your mediator or webhook subscriber service has secure access to.</li></ol><p>Your mediator microservice is then required to:</p><ol start="3"><li>Authenticate and request an access token. Described below.</li><li>Develop a <a href="/opencrvs-core/docs/technology/mediators">mediator</a> or <a href="/opencrvs-core/docs/technology/webhooks">webhook subscriber</a> to perform your required business functions. We expose some OpenCRVS events as Webhooks which can be a good way to interact immediately if the supported events are of interest to you.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="register-a-system-client"></a>Register a system client<a class="hash-link" href="#register-a-system-client" title="Direct link to heading">#</a></h3><p><strong>In the upcoming OpenCRVS Beta release the following process will be deprecated and replaced by a GUI in the System Administrator User Team Management functionality.</strong></p><p>Using a valid system administrator JWT token returned during OpenCRVS client authentication, SSH into your manager instance and run the following commands to register a new client.</p><p>Find a running auth service Docker container ID. NOTE: You may need to connect to a worker node if auth is not running on the manager.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker ps -a</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker exec &lt;Insert auth service container id on node&gt; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">wget -S --header=&quot;Authorization: Bearer &lt;Insert your valid system administrator JWT here&gt;&quot; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--header=&#x27;Accept-Charset: UTF-8&#x27; --header=&#x27;Content-Type: application/json&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--post-data â€˜{&quot;scope&quot;:&quot;NATIONAL_ID&quot;}&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-O - http://user-mgnt:3030/registerSystemClient</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><strong>Request payload</strong></p><p>Example json</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;scope&quot;: &quot;NATIONAL_ID&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><table><thead><tr><th>Parameter</th><th>Sample value</th><th>Description</th></tr></thead><tbody><tr><td><code>scope</code></td><td><code>NATIONAL_ID</code></td><td>Available integration scopes currently include: <strong>NATIONAL_ID</strong> <strong>HEALTH</strong> <strong>AGE_CHECK</strong> <strong>EXTERNAL_VALIDATION</strong>.</td></tr></tbody></table><p><strong>Request Response</strong></p><p>The command will return the following details:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;client_id&quot;: &quot;2fd153ab-86c8-45fb-990d-721140e46061&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;client_secret&quot;: &quot;8636abe2-affb-4238-8bff-200ed3652d1e&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;sha_secret&quot;: &quot;d04aec67-1ef4-467a-a5a8-fa5c89ad71ce&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>These are your authentication, and webhook payload verification details for your API and should be stored securely in line with your organisation&#x27;s security policies and never exposed in code repositories.</p><table><thead><tr><th>Parameter</th><th>Sample value</th><th>Description</th></tr></thead><tbody><tr><td><code>client_id</code></td><td><code>2fd153ab-86c8-45fb-990d-721140e46061</code></td><td>The client id used in the authentication process for system clients.</td></tr><tr><td><code>client_secret</code></td><td><code>8636abe2-affb-4238-8bff-200ed3652d1e</code></td><td>The client secret used in the authentication process for system clients.</td></tr><tr><td><code>sha_secret</code></td><td><code>d04aec67-1ef4-467a-a5a8-fa5c89ad71ce</code></td><td>The <strong>SHA1</strong> signature used when verifying that a webhook payload is genuine</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="deactivate-a-system-client"></a>Deactivate a system client<a class="hash-link" href="#deactivate-a-system-client" title="Direct link to heading">#</a></h3><p>Using a valid system administrator JWT token returned during OpenCRVS client authentication, SSH into your manager instance and run the following commands to deactivate an existing client:</p><p>Find a running auth service Docker container ID. NOTE: You may need to connect to a worker node if auth is not running on the manager.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker ps -a</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Run the following command replacing the client_id with the client_id you wish to deactivate. You can browse the <strong>user-mgnt &gt; systems</strong> collection in Mongo to find the client details.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker exec &lt;Insert auth service container id on node&gt; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">wget -S --header=&quot;Authorization: Bearer &lt;Insert your valid JWT here&gt;&quot; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--header=&#x27;Accept-Charset: UTF-8&#x27; --header=&#x27;Content-Type: application/json&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--post-data &#x27;{&quot;client_id&quot;:&quot;2fd153ab-86c8-45fb-990d-721140e46061&quot;}&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-O - http://user-mgnt:3030/deactivateSystemClient</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="reactivate-a-deactivated-system-client"></a>Reactivate a deactivated system client<a class="hash-link" href="#reactivate-a-deactivated-system-client" title="Direct link to heading">#</a></h3><p>Using a valid system administrator JWT token returned during OpenCRVS client authentication, SSH into your manager instance and run the following commands to reactivate a previously deactivated client:</p><p>Find a running auth service Docker container ID. NOTE: You may need to connect to a worker node if auth is not running on the manager.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker ps -a</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Run the following command replacing the client_id with the client_id you wish to reactivate. You can browse the <strong>user-mgnt &gt; systems</strong> collection in Mongo to find the client details.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker exec &lt;Insert auth service container id on node&gt; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">wget -S --header=&quot;Authorization: Bearer &lt;Insert your valid JWT here&gt;&quot; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--header=&#x27;Accept-Charset: UTF-8&#x27; --header=&#x27;Content-Type: application/json&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--post-data &#x27;{&quot;client_id&quot;:&quot;2fd153ab-86c8-45fb-990d-721140e46061&quot;}&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-O - http://user-mgnt:3030/reactivateSystemClient</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="request-an-access-token"></a>Request an access token<a class="hash-link" href="#request-an-access-token" title="Direct link to heading">#</a></h3><p><strong>URL</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">POST https://auth.&lt;your-open-crvs-host.com&gt;/authenticateSystemClient</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><strong>Request payload</strong></p><p>Example json</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;client_id&quot;: &quot;2fd153ab-86c8-45fb-990d-721140e46061&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;client_secret&quot;: &quot;8636abe2-affb-4238-8bff-200ed3652d1e&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><table><thead><tr><th>Parameter</th><th>Sample value</th><th>Description</th></tr></thead><tbody><tr><td><code>client_id</code></td><td><code>2fd153ab-86c8-45fb-990d-721140e46061</code></td><td>The client id used in the authentication process for system clients.</td></tr><tr><td><code>client_secret</code></td><td><code>8636abe2-affb-4238-8bff-200ed3652d1e</code></td><td>The client secret used in the authentication process for system clients.</td></tr></tbody></table><p><strong>Request Response</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;token&quot;: &quot;eyJhbGciOiJSUzI1NiIsInR5cCI6Ikp...&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The token is a <a href="https://jwt.io/" target="_blank" rel="noopener noreferrer">JWT</a> containing with the following structure and must be included as an <code>Authorization: Bearer &lt;token&gt;</code> in all future requests:</p><p><strong>Token Header</strong></p><table><thead><tr><th>Parameter</th><th>Sample value</th><th>Description</th></tr></thead><tbody><tr><td><code>alg</code></td><td><code>RS256</code></td><td>Signing algorithm.</td></tr><tr><td><code>typ</code></td><td><code>JWT</code></td><td>This value is always <code>JWT</code>.</td></tr></tbody></table><p><strong>Token Payload</strong></p><table><thead><tr><th>Parameter</th><th>Sample value</th><th>Description</th></tr></thead><tbody><tr><td><code>scope</code></td><td><code>[&#x27;health&#x27;]</code></td><td>An array of OpenCRVS roles for authorization permissions to access. These are defined as a feature of the OpenCRVS core. Approved scopes are <code>health</code>, <code>nationalId</code>, <code>ageCheck</code>. If you require a new scope, please open a feature request</td></tr><tr><td><code>iat</code></td><td><code>1593712289</code></td><td>When the JWT was created.</td></tr><tr><td><code>exp</code></td><td><code>1594317089</code></td><td>When the JWT expires - For System clients this is set to 10 minutes by default, but this is configurable in the resources package.</td></tr><tr><td><code>aud</code></td><td><code>[&#x27;opencrvs.auth&#x27;]</code></td><td>An array of services that will respond to this JWT.</td></tr><tr><td><code>iss</code></td><td><code>&#x27;opencrvs.auth&#x27;</code></td><td>The issuing service of the JWT.</td></tr><tr><td><code>sub</code></td><td><code>&#x27;5ee75eb2104ccf88d9ac0c3d&#x27;</code></td><td>Equal to the user or system id.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="interoperability-via-openhim-and-fhir"></a>Interoperability via OpenHIM and FHIR<a class="hash-link" href="#interoperability-via-openhim-and-fhir" title="Direct link to heading">#</a></h2><p><a href="http://openhim.org/" target="_blank" rel="noopener noreferrer">OpenHIM</a> is our pass-through, publish/subscribe middleware for all civil registration process events, tracking and exposing them as <a href="/opencrvs-core/docs/technology/webhooks">Webhooks</a>, via authenticated API integrations - <a href="/opencrvs-core/docs/technology/mediators">OpenHIM Mediators</a>.</p><p><a href="https://hl7.org/FHIR/" target="_blank" rel="noopener noreferrer">FHIR</a> was created by <a href="http://hl7.org/" target="_blank" rel="noopener noreferrer">Health Level Seven International (HL7)</a> a not-for-profit, ANSI-accredited standards developing organization dedicated to providing a comprehensive framework and related standards for the exchange, integration, sharing and retrieval of electronic health information that supports clinical practice and the management, delivery and evaluation of health services.</p><p>We designed FHIR standards for Civil Registration and look forward to submitting them to HL7 for inclusion in the next version of FHIR.</p><ul><li><a href="https://github.com/jembi/opencrvs-fhir-templates/blob/master/birth-notification/fhir-document.jsonc" target="_blank" rel="noopener noreferrer">Event notification</a></li><li><a href="https://github.com/jembi/opencrvs-fhir-templates/blob/master/birth-registration/fhir-document.jsonc" target="_blank" rel="noopener noreferrer">Birth registration</a></li><li><a href="https://github.com/jembi/opencrvs-fhir-templates/blob/master/death-registration/fhir-document.jsonc" target="_blank" rel="noopener noreferrer">Death registration</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="example-integrations"></a>Example integrations<a class="hash-link" href="#example-integrations" title="Direct link to heading">#</a></h2><p><a href="/opencrvs-core/docs/technology/mediators">Mediators</a> can be built in any technology due to being containerised microservices, and can convert in real-time, any data format to and from <a href="https://hl7.org/FHIR/" target="_blank" rel="noopener noreferrer">FHIR</a> and we have an example of these integrations into <a href="https://www.dhis2.org/" target="_blank" rel="noopener noreferrer">DHIS2</a> and National ID in operation in Bangladesh.</p><p>A simple mediator exposing the age of a child to a 3rd party application, (in this case a Telegram / WhatsApp <a href="https://github.com/opencrvs/opencrvs-zambia/tree/master/src/zmb/chatbot" target="_blank" rel="noopener noreferrer">chatbot</a> used to verify if a child is old enough to be married) is available <a href="https://github.com/opencrvs/opencrvs-zambia/tree/master/src/zmb/mediators/ocrvs-chatbot" target="_blank" rel="noopener noreferrer">here</a>.</p><p>You can read more about the functional interoperability requirements <a href="/opencrvs-core/docs/system_overview/interoperability">here</a></p><p>You can read more regarding record verification <a href="/opencrvs-core/docs/core_functions/recordVerification">here</a></p><p><strong>MOSIP Example</strong></p><p>A technical proof of concept <a href="/opencrvs-core/docs/technology/mediators">mediator</a> that exposes civil registration events via a <a href="/opencrvs-core/docs/technology/webhooks">Webhook</a> to the <a href="https://www.mosip.io/" target="_blank" rel="noopener noreferrer">MOSIP - the Modular Open Source Identity Platform</a> is documented on the mediator and webhooks page, along with links to the code.</p><p>This integration represents A FHIR standardised approach to ensuring that a birth registration directly creates a National ID number with optional biometrics.
This interoperability ensures that the legal identity established at birth is then utilised as a foundational identity to access other services (e.g. health, education, financial inclusion, passport, mobile phone etc.) and to ensure that we leave no one behind.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/opencrvs-core/docs/technology/technicalConfiguration"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Technical configuration</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/opencrvs-core/docs/technology/webhooks"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Webhook integration Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#register-a-system-client" class="table-of-contents__link">Register a system client</a></li><li><a href="#deactivate-a-system-client" class="table-of-contents__link">Deactivate a system client</a></li><li><a href="#reactivate-a-deactivated-system-client" class="table-of-contents__link">Reactivate a deactivated system client</a></li><li><a href="#request-an-access-token" class="table-of-contents__link">Request an access token</a></li><li><a href="#interoperability-via-openhim-and-fhir" class="table-of-contents__link">Interoperability via OpenHIM and FHIR</a></li><li><a href="#example-integrations" class="table-of-contents__link">Example integrations</a></li></ul></div></div></div></div></main></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/opencrvs-core/" class="nav-home"><img src="/opencrvs-core/img/logo.svg" alt="OpenCRVS is a digital public good to help achieve universal civil registration and evidence-based decision making in all country contexts" width="125" height="28.47"></a><div><h5>Docs</h5><a href="/opencrvs-core/docs/system_overview/introduction">System overview</a><a href="#">User types</a><a href="/opencrvs-core/docs/core_functions/notifyAVitalEvent">Core functions</a><a href="/opencrvs-core/docs/support_functions/login">Support functions</a><a href="/opencrvs-core/docs/system_admin/userTeam">System admin functions</a><a href="/opencrvs-core/docs/technology/technologyIntroduction">Technology</a></div><div><h5>Community</h5><a href="/opencrvs-core/docs/community/introduction">Community</a><a href="/opencrvs-core/docs/community/contributing">Contributing</a><a href="/opencrvs-core/docs/community/implementations">Implementations</a><a href="/opencrvs-core/docs/community/team">Team</a></div><div><h5>Legal</h5><a href="https://www.plan.org.au/contact/privacy" target="_blank">Privacy</a><a href="https://www.opencrvs.org/license" target="_blank">License</a></div><div><h5>Social</h5><a class="gitter">Gitter</a><a href="https://github.com/opencrvs/opencrvs-core" target="_blank">GitHub</a><a class="github-button" href="https://github.com/opencrvs/opencrvs-core/subscription" data-icon="octicon-eye" aria-label="Watch opencrvs/opencrvs-core on GitHub">Watch</a><br><a class="github-button" href="https://github.com/opencrvs/opencrvs-core" data-icon="octicon-star" data-count-href="/opencrvs/opencrvs-core/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Â© All rights reserved Plan International 2020. Plan International Australia will collect your information if you choose to join our community for the sole purpose of keeping you informed of OpenCRVS updates. For more information please access Plan International Australiaâ€™s Privacy Statement.</section></footer></div>
<script src="/opencrvs-core/styles.aa7a5620.js"></script>
<script src="/opencrvs-core/runtime~main.7b9d33d2.js"></script>
<script src="/opencrvs-core/main.15f78e6e.js"></script>
<script src="/opencrvs-core/1.4a595656.js"></script>
<script src="/opencrvs-core/2.4d28047a.js"></script>
<script src="/opencrvs-core/1be78505.9de9b068.js"></script>
<script src="/opencrvs-core/a6aa9e1f.7b77f294.js"></script>
<script src="/opencrvs-core/c4f5d8e4.3ca96593.js"></script>
<script src="/opencrvs-core/ccc49370.05b271aa.js"></script>
<script src="/opencrvs-core/68.94c17dca.js"></script>
<script src="/opencrvs-core/67.8bca164e.js"></script>
<script src="/opencrvs-core/935f2afb.6e01492a.js"></script>
<script src="/opencrvs-core/17896441.d87f9ed0.js"></script>
<script src="/opencrvs-core/036cd733.d394ca11.js"></script>
</body>
</html>